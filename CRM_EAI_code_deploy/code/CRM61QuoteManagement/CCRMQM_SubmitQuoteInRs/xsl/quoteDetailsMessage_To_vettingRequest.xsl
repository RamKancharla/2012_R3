<?xml version = '1.0' encoding = 'UTF-8'?>
<?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
  <mapSources>
    <source type="WSDL">
      <schema location="CCRMQM_SubmitQuoteInRs.wsdl"/>
      <rootElement name="quoteDetailsMessage" namespace="http://www.siebel.com/xml/RCRM%20Quote%20External"/>
    </source>
  </mapSources>
  <mapTargets>
    <target type="WSDL">
      <schema location="http://inkaban3ua-eai01:7777/orabpel/CCRMSync/CCRMTF_QuoteRequestValidator/CCRMTF_QuoteRequestValidator?wsdl"/>
      <rootElement name="vettingRequest" namespace="http://www.reuters.com/ns/2007/09/01/GCAP/CCRM/TechFul"/>
    </target>
  </mapTargets>
  <!-- GENERATED BY ORACLE XSL MAPPER 10.1.3.3.0(build 070615.0525) AT [MON SEP 22 18:20:36 BST 2008]. -->
?>
<xsl:stylesheet version="1.0" xmlns:ns3="http://www.reuters.com/ns/2007/09/01/GCAP/CommonMessageTypes" xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:ns9="http://www.reuters.com/ns/2007/09/01/GCAP/CommonUserTypes" xmlns:plnk="http://schemas.xmlsoap.org/ws/2003/05/partner-link/" xmlns:ehdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.esb.server.headers.ESBHeaderFunctions" xmlns:ns0="http://www.w3.org/2001/XMLSchema" xmlns:out1="http://www.siebel.com/xml/RCRM%20Quote%20External" xmlns:ns8="http://www.reuters.com/ns/2007/09/01/GCAP/NillableUserTypes" xmlns:ns5="http://www.reuters.com/ns/2007/09/01/GCAP/CommonQuoteTypes" xmlns:ns2="http://schemas.oracle.com/bpel/extension" xmlns:ns1="http://www.reuters.com/ns/2007/09/01/GCAP/CCRM/TechFul" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:client="http://www.reuters.com/ns/2007/01/25/GCAP/EAI/CCRM/TF" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:ns6="http://www.reuters.com/ns/2007/09/01/GCAP/CCRM/QuoteManagementServices" xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath" xmlns:orcl="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:ns4="http://www.reuters.com/ns/2007/09/01/GCAP/SchemaAnnotations" xmlns:ns7="http://www.reuters.com/ns/2007/09/01/GCAP/CommonAccountTypes" xmlns:tns="http://oracle.com/esb/namespaces/CCRMQM" exclude-result-prefixes="xsl ns0 out1 ns6 ns3 ns9 plnk ns8 ns5 ns2 ns1 soap client ns4 ns7 bpws ehdr hwf xp20 xref ora ids orcl" xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue">
  <xsl:template match="/">
    <ns1:vettingRequest>
      <ns1:eaiHeader>
        <ns3:applicationId>
          <xsl:value-of select="/out1:quoteDetailsMessage/out1:SourceSystem"/>
        </ns3:applicationId>
        <ns3:transactionId>
          <xsl:value-of select="/out1:quoteDetailsMessage/out1:MessageId"/>
        </ns3:transactionId>
        <ns3:messageId>
          <xsl:value-of select="/out1:quoteDetailsMessage/out1:MessageId"/>
        </ns3:messageId>
        <ns3:messageHistory>
          <xsl:value-of select="/out1:quoteDetailsMessage/out1:MessageHistory"/>
        </ns3:messageHistory>
        <ns3:tracingId>
          <xsl:value-of select="/out1:quoteDetailsMessage/out1:MessageId"/>
        </ns3:tracingId>
        <ns3:timeStamp>
          <xsl:value-of select="xp20:current-dateTime()"/>
        </ns3:timeStamp>
        <ns3:instanceId>
          <xsl:value-of select="string(&quot;0&quot;)"/>
        </ns3:instanceId>
        <ns3:timeToLive>
          <xsl:value-of select="number(0.0)"/>
        </ns3:timeToLive>
        <ns3:payloadVersion>
          <xsl:value-of select="string(&quot;B&quot;)"/>
        </ns3:payloadVersion>
      </ns1:eaiHeader>
      <xsl:for-each select="/out1:quoteDetailsMessage/out1:Quote">
        <ns1:quoteHeader>
          <ns5:quoteNumber>
            <xsl:value-of select="out1:QuoteNumber"/>
          </ns5:quoteNumber>
          <ns5:revisionNumber>
            <xsl:value-of select="out1:Revision"/>
          </ns5:revisionNumber>
          <ns5:quoteHeaderName>
            <xsl:value-of select="out1:Name"/>
          </ns5:quoteHeaderName>
          <ns5:orderType>
            <xsl:value-of select="out1:RCRMOrderType"/>
          </ns5:orderType>
          <ns5:createdBy>
            <xsl:value-of select="out1:RCRMCreatedBy"/>
          </ns5:createdBy>
          <xsl:choose>
            <xsl:when test="orcl:right-trim(out1:EndDate) != &quot;&quot;">
              <ns5:effectiveEndDate>
                <xsl:value-of select="concat(substring(out1:EndDate,7.0,4.0),&quot;-&quot;,substring(out1:EndDate,1.0,2.0),&quot;-&quot;,substring(out1:EndDate,4.0,2.0))"/>
              </ns5:effectiveEndDate>
            </xsl:when>
            <xsl:otherwise>
              <ns5:effectiveEndDate>
                <xsl:value-of select="out1:EndDate"/>
              </ns5:effectiveEndDate>
            </xsl:otherwise>
          </xsl:choose>
          <ns5:locationID>
            <xsl:value-of select="out1:AccountId"/>
          </ns5:locationID>
          <xsl:choose>
            <xsl:when test="orcl:right-trim(out1:ClientRequestedDate) != &quot;&quot;">
              <ns5:customerRequiredDate>
                <xsl:value-of select="concat(substring(out1:ClientRequestedDate,7.0,4.0),&quot;-&quot;,substring(out1:ClientRequestedDate,1.0,2.0),&quot;-&quot;,substring(out1:ClientRequestedDate,4.0,2.0))"/>
              </ns5:customerRequiredDate>
            </xsl:when>
            <xsl:otherwise>
              <ns5:customerRequiredDate>
                <xsl:value-of select="out1:ClientRequestedDate"/>
              </ns5:customerRequiredDate>
            </xsl:otherwise>
          </xsl:choose>
          <ns5:purchaseOrderNumber>
            <xsl:value-of select="out1:RCRMPONumber"/>
          </ns5:purchaseOrderNumber>
          <ns5:approvalRecordNumber>
            <xsl:value-of select="out1:Approvals/out1:Id"/>
          </ns5:approvalRecordNumber>
          <ns5:quoteStatus>
            <xsl:value-of select="dvm:lookupValue(&quot;oramds:/apps/EAIMetaData/dvm/QuoteReference.dvm&quot;,&quot;SiebelValue&quot;,out1:Status,&quot;EAIValue&quot;,out1:Status)"/>
          </ns5:quoteStatus>
          <ns5:orderNumber>
            <xsl:value-of select="out1:OrderNumber"/>
          </ns5:orderNumber>
          <ns5:assignedOMS>
            <xsl:value-of select="out1:AssignedOMS"/>
          </ns5:assignedOMS>
          <ns5:rcrmFreeTrialDuration>
            <xsl:value-of select="out1:RCRMFreeTrialDuration"/>
          </ns5:rcrmFreeTrialDuration>
          <xsl:for-each select="out1:QuoteNote">
            <ns5:notes>
              <ns5:noteType>
                <xsl:value-of select="dvm:lookupValue(&quot;oramds:/apps/EAIMetaData/dvm/CCRMQM_SubmitQuoteInRsNoteTypesMap.dvm&quot;,&quot;SIEBEL_NOTE_TYPE&quot;,out1:RCRMType,&quot;CANONICAL_NOTE_TYPE&quot;,&quot;ERROR_UNKNOWN&quot;)"/>
              </ns5:noteType>
              <ns5:note>
                <xsl:value-of select="out1:Note"/>
              </ns5:note>
            </ns5:notes>
          </xsl:for-each>
          <xsl:for-each select="out1:Approvals">
            <ns5:approvals>
              <xsl:choose>
                <xsl:when test="orcl:right-trim(out1:RCRMApprovalDate) != &quot;&quot;">
                  <ns5:rcrmApprovalDate>
                    <xsl:value-of select="concat(substring(out1:RCRMApprovalDate,7.0,4.0),&quot;-&quot;,substring(out1:RCRMApprovalDate,1.0,2.0),&quot;-&quot;,substring(out1:RCRMApprovalDate,4.0,2.0))"/>
                  </ns5:rcrmApprovalDate>
                </xsl:when>
                <xsl:otherwise>
                  <ns5:rcrmApprovalDate>
                    <xsl:value-of select="out1:RCRMApprovalDate"/>
                  </ns5:rcrmApprovalDate>
                </xsl:otherwise>
              </xsl:choose>
              <xsl:choose>
                <xsl:when test="orcl:right-trim(out1:RCRMApprovalRequestedDate) != &quot;&quot;">
                  <ns5:rcrmApprovalRequestDate>
                    <xsl:value-of select="concat(substring(out1:RCRMApprovalRequestedDate,7.0,4.0),&quot;-&quot;,substring(out1:RCRMApprovalRequestedDate,1.0,2.0),&quot;-&quot;,substring(out1:RCRMApprovalRequestedDate,4.0,2.0))"/>
                  </ns5:rcrmApprovalRequestDate>
                </xsl:when>
                <xsl:otherwise>
                  <ns5:rcrmApprovalRequestDate>
                    <xsl:value-of select="out1:RCRMApprovalRequestedDate"/>
                  </ns5:rcrmApprovalRequestDate>
                </xsl:otherwise>
              </xsl:choose>
              <ns5:rcrmApprovalComments>
                <xsl:value-of select="out1:RCRMApprovalComments"/>
              </ns5:rcrmApprovalComments>
              <ns5:rcrmFailureReasonCode>
                <xsl:value-of select="out1:RCRMFailureReasonCode"/>
              </ns5:rcrmFailureReasonCode>
              <ns5:rcrmFailureReasonComments>
                <xsl:value-of select="out1:RCRMFailureReasonComments"/>
              </ns5:rcrmFailureReasonComments>
              <ns5:rcrmVettingResult>
                <xsl:value-of select="out1:RCRMVettingResult"/>
              </ns5:rcrmVettingResult>
              <ns5:rcrmAllocatedTo>
                <xsl:value-of select="out1:RCRMAllocatedTo"/>
              </ns5:rcrmAllocatedTo>
            </ns5:approvals>
          </xsl:for-each>
        </ns1:quoteHeader>
      </xsl:for-each>
      <xsl:for-each select="/out1:quoteDetailsMessage/out1:Quote/out1:LineItems">
        <ns1:quoteLineItem>
          <ns5:lineID>
            <xsl:value-of select="out1:Id"/>
          </ns5:lineID>
          <ns5:parentLineID>
            <xsl:value-of select="out1:ParentQuoteItemId"/>
          </ns5:parentLineID>
          <ns5:lineNumber>
            <xsl:value-of select="out1:LineNumber"/>
          </ns5:lineNumber>
          <ns5:partNumber>
            <xsl:value-of select="out1:PartNumber"/>
          </ns5:partNumber>
          <ns5:quantity>
            <xsl:value-of select="out1:QuantityRequested"/>
          </ns5:quantity>
          <ns5:productIntegrationID>
            <xsl:value-of select="out1:ProductIntegrationId"/>
          </ns5:productIntegrationID>
          <ns5:assetIntegrationID>
            <xsl:value-of select="out1:AssetIntegrationId"/>
          </ns5:assetIntegrationID>
          <ns5:billingAccountId>
            <xsl:value-of select="out1:BillingAccountId"/>
          </ns5:billingAccountId>
          <ns5:actionCode>
            <xsl:value-of select="dvm:lookupValue(&quot;oramds:/apps/EAIMetaData/dvm/CCRMQM_SubmitQuoteInRsLineItemActionCodeMap.dvm&quot;,&quot;SIEBEL_INTEGRATION_OBJECT&quot;,out1:ActionCode,&quot;EAI&quot;,&quot;ERROR IN EAI: CCRMQM_SubmitQuoteInRs&quot;)"/>
          </ns5:actionCode>
          <ns5:altInstallationBilAccId>
            <xsl:value-of select="out1:AltInstallationAddBilAccId"/>
          </ns5:altInstallationBilAccId>
          <xsl:choose>
            <xsl:when test="orcl:right-trim(out1:RCRMLIInstallDate) != &quot;&quot;">
              <ns5:rcrmLInstallDate>
                <xsl:value-of select="concat(substring(out1:RCRMLIInstallDate,7.0,4.0),&quot;-&quot;,substring(out1:RCRMLIInstallDate,1.0,2.0),&quot;-&quot;,substring(out1:RCRMLIInstallDate,4.0,2.0))"/>
              </ns5:rcrmLInstallDate>
            </xsl:when>
            <xsl:otherwise>
              <ns5:rcrmLInstallDate>
                <xsl:value-of select="out1:RCRMLIInstallDate"/>
              </ns5:rcrmLInstallDate>
            </xsl:otherwise>
          </xsl:choose>
          <ns5:rcrmFreeTrialDuration>
            <xsl:value-of select="out1:RCRMFreeTrialDuration"/>
          </ns5:rcrmFreeTrialDuration>
          <ns5:productName>
            <xsl:value-of select="out1:ProductName"/>
          </ns5:productName>
          <xsl:for-each select="out1:ItemXA">
            <ns5:attribute>
              <ns5:attributeName>
                <xsl:value-of select="out1:DisplayName"/>
              </ns5:attributeName>
              <ns5:attributeValue>
                <xsl:value-of select="out1:Value"/>
              </ns5:attributeValue>
            </ns5:attribute>
          </xsl:for-each>
          <ns5:technicalApprovalRequired>
            <xsl:value-of select="out1:RCRMMandatoryTechAppFlag"/>
          </ns5:technicalApprovalRequired>
          <ns5:technicalFulfilmentRequired>
            <xsl:value-of select="out1:RCRMMandatoryTechFulfilmentFlag"/>
          </ns5:technicalFulfilmentRequired>
        </ns1:quoteLineItem>
      </xsl:for-each>
    </ns1:vettingRequest>
  </xsl:template>
</xsl:stylesheet>
