<?xml version = '1.0' encoding = 'UTF-8'?>
<?oracle-xsl-mapper <!-- SPECIFICATION OF MAP SOURCES AND TARGETS, DO NOT MODIFY. -->
  <mapSources>
    <source type="XSD">
      <schema location="EAI.MSG.CCRM.OP.226_PublishOpportunityRequestResponse.xsd"/>
      <rootElement name="RCRMOpportunityPublish" namespace="http://www.siebel.com/xml/RCRM%20Opportunity%20Inbound"/>
    </source>
  </mapSources>
  <mapTargets>
    <target type="XSD">
      <schema location="http://eaidev2:7777/orabpel/ccrmasync/CCRMOP_PublishOpportunity/EAI.MSG.OP.232_OpportunityEvent.xsd"/>
      <rootElement name="opportunityEvent" namespace="http://www.reuters.com/ns/2007/09/01/GCAP/EAI/OpportunityManagement"/>
    </target>
  </mapTargets>
  <!-- GENERATED BY ORACLE XSL MAPPER 10.1.3.3.0(build 070615.0525) AT [WED SEP 15 18:06:05 GMT+05:30 2010]. -->
?>
<xsl:stylesheet version="1.0" xmlns:gcap-message="http://www.reuters.com/ns/2007/09/01/GCAP/CommonMessageTypes" xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:ns0="http://www.reuters.com/ns/2007/09/01/GCAP/EAI/OpportunityManagement" xmlns:ehdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.esb.server.headers.ESBHeaderFunctions" xmlns:gcap-opportunity="http://www.reuters.com/ns/2007/09/01/GCAP/CommonOpportunityTypes" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsdLocal="http://www.siebel.com/xml/RCRM%20Opportunity%20Inbound" xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath" xmlns:orcl="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:gcap-sa="http://www.reuters.com/ns/2007/09/01/GCAP/SchemaAnnotations" xmlns:gcap-account="http://www.reuters.com/ns/2007/09/01/GCAP/CommonAccountTypes" exclude-result-prefixes="xsl xsd xsdLocal gcap-message ns0 gcap-opportunity gcap-sa gcap-account bpws ehdr hwf xp20 xref ora ids orcl" xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue">
  <xsl:template match="/">
    <ns0:opportunityEvent>
      <ns0:eaiHeader>
        <gcap-message:applicationId>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:SourceSystem"/>
        </gcap-message:applicationId>
        <gcap-message:transactionId>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/@MessageId"/>
        </gcap-message:transactionId>
        <gcap-message:messageId>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/@MessageId"/>
        </gcap-message:messageId>
        <gcap-message:messageHistory>
          <xsl:value-of select="string(&quot;CRM;EAI;&quot;)"/>
        </gcap-message:messageHistory>
        <gcap-message:tracingId>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/@MessageId"/>
        </gcap-message:tracingId>
        <gcap-message:timeStamp>
          <xsl:value-of select="xp20:current-dateTime()"/>
        </gcap-message:timeStamp>
        <gcap-message:instanceId>
          <xsl:value-of select="string(0.0)"/>
        </gcap-message:instanceId>
        <gcap-message:timeToLive>
          <xsl:value-of select="number(&quot;0&quot;)"/>
        </gcap-message:timeToLive>
        <gcap-message:payloadVersion>
          <xsl:value-of select="string(&quot;A&quot;)"/>
        </gcap-message:payloadVersion>
      </ns0:eaiHeader>
      <ns0:actionCode>
        <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:ActionCode"/>
      </ns0:actionCode>
      <ns0:opportunity>
        <ns0:siebelOptyID>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:Id"/>
        </ns0:siebelOptyID>
        <ns0:SFDCOptyID>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RCRMSFDCOpptyId"/>
        </ns0:SFDCOptyID>
        <ns0:optyNumber>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:OptyNumber"/>
        </ns0:optyNumber>
        <ns0:optyname>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:Name"/>
        </ns0:optyname>
        <ns0:SFDCAccountID>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RCRMSFDCAccountId"/>
        </ns0:SFDCAccountID>
        <ns0:siebelAccountID>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:AccountId"/>
        </ns0:siebelAccountID>
        <ns0:accountName>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:Account"/>
        </ns0:accountName>
        <ns0:optyType>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RCRMOpportunityType"/>
        </ns0:optyType>
        <ns0:expectedRevenue>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RecurringRevenue"/>
        </ns0:expectedRevenue>
        <ns0:closeDate>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:PositionCloseDate"/>
        </ns0:closeDate>
        <ns0:monthlyRecurring>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:OpportunityPosition/xsdLocal:RCRMPrimaryRecurringRevenue"/>
        </ns0:monthlyRecurring>
        <ns0:OnceOffRevenue>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:OpportunityPosition/xsdLocal:RCRMPrimaryOnceOffRevenue"/>
        </ns0:OnceOffRevenue>
        <ns0:probability>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:PrimaryRevenueWinProbability"/>
        </ns0:probability>
        <ns0:salesStage>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:SalesStage"/>
        </ns0:salesStage>
        <ns0:currencyCode>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:CurrencyCode"/>
        </ns0:currencyCode>
        <ns0:winLossReason>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:ReasonWonLost"/>
        </ns0:winLossReason>
        <ns0:expectedRevenueDate>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RCRMBillDate"/>
        </ns0:expectedRevenueDate>
        <ns0:ownerEmail>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:AccountMgrEmailAddress"/>
        </ns0:ownerEmail>
        <ns0:ftOnceOffRevenue>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RCRMFTSumTotalPriceOnce-Off"/>
        </ns0:ftOnceOffRevenue>
        <ns0:ftRecurringRevenue>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RCRMFTSumTotalPriceRecurring"/>
        </ns0:ftRecurringRevenue>
        <ns0:activeQuote>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:ActiveQuote"/>
        </ns0:activeQuote>
        <ns0:lastUpdatedBy>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:LastUpdatedBy"/>
        </ns0:lastUpdatedBy>
        <ns0:lastUpdated>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:Updated"/>
        </ns0:lastUpdated>
        <ns0:opportunityDescription>
          <xsl:value-of select="concat(/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:OpportunityNotes/xsdLocal:Note1,/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:OpportunityNotes/xsdLocal:Note2)"/>
        </ns0:opportunityDescription>
        <ns0:utahBlockedOpportunities>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RCRMUtahBlockedOpportunity"/>
        </ns0:utahBlockedOpportunities>
        <xsl:for-each select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:Campaign">
          <ns0:campaignSourceCode>
            <ns0:sourceCode>
              <xsl:value-of select="xsdLocal:SourceCode"/>
            </ns0:sourceCode>
          </ns0:campaignSourceCode>
        </xsl:for-each>
        <xsl:for-each select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:OpportunityPosition">
          <ns0:opportunityTeam>
            <ns0:siebelOptyID>
              <xsl:value-of select="xsdLocal:OpportunityId"/>
            </ns0:siebelOptyID>
            <ns0:SFDCOptyID>
              <xsl:value-of select="xsdLocal:SFDCId"/>
            </ns0:SFDCOptyID>
            <ns0:employeeEmailAddress>
              <xsl:value-of select="xsdLocal:EmailAddress"/>
            </ns0:employeeEmailAddress>
          </ns0:opportunityTeam>
        </xsl:for-each>
        <ns0:IsPoRequired>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RCRMPurchaseOrderStatus"/>
        </ns0:IsPoRequired>
        <ns0:PurchaseOrderNumber>
          <xsl:value-of select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:RCRMPurchaseOrder"/>
        </ns0:PurchaseOrderNumber>
      </ns0:opportunity>
      <xsl:for-each select="/xsdLocal:RCRMOpportunityPublish/xsdLocal:Opportunity/xsdLocal:OpportunityProduct">
        <ns0:opportunityProduct>
          <ns0:siebelID>
            <xsl:value-of select="xsdLocal:ProductId"/>
          </ns0:siebelID>
          <ns0:siebelOptyID>
            <xsl:value-of select="xsdLocal:OpptyId"/>
          </ns0:siebelOptyID>
          <ns0:productFamily>
            <xsl:value-of select="xsdLocal:Product"/>
          </ns0:productFamily>
          <ns0:quantity>
            <xsl:value-of select="xsdLocal:ProductQuantity"/>
          </ns0:quantity>
          <ns0:revenueType>
            <xsl:value-of select="xsdLocal:RCRMRevenueType"/>
          </ns0:revenueType>
          <ns0:oneTime>
            <xsl:value-of select="xsdLocal:ProductPrice"/>
          </ns0:oneTime>
          <ns0:monthlyReccuring>
            <xsl:value-of select="xsdLocal:ProductPrice"/>
          </ns0:monthlyReccuring>
          <ns0:productComments>
            <xsl:value-of select="xsdLocal:Comment"/>
          </ns0:productComments>
          <ns0:freeTrialFlag>
            <xsl:value-of select="xsdLocal:RCRMFreeTrialFlag"/>
          </ns0:freeTrialFlag>
          <ns0:InstalledToId>
            <xsl:value-of select="xsdLocal:RCRMInstallAccId"/>
          </ns0:InstalledToId>
          <ns0:revenueMasterflag>
            <xsl:value-of select="xsdLocal:RCRMRevenueMasterflag"/>
          </ns0:revenueMasterflag>
        </ns0:opportunityProduct>
      </xsl:for-each>
    </ns0:opportunityEvent>
  </xsl:template>
</xsl:stylesheet>
